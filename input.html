<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
		<title>Online Teleprompter</title>
		
		<script type="text/javascript" src="js/scroll.js"></script>
		
		<link href="css/bootstrap.min.css" rel="stylesheet">
	</head>
	<body>
		<div class ="row">
		<div class="col-md-offset-1">
			<div class="container">
				<h1>Teleprompter Input</h1>
			</div>
		</div>
		<div class="container">
			<form>
			  <div class="form-group">
				<label for="exampleInputFile">Paste your script here</label>
				<textarea class="form-control" rows="15" id="byte_content"></textarea>
			  </div>
			  - OR -<br /><br />
<!-- 			  <div class="form-group">
				<label for="exampleInputFile">Import a file</label>
				<input type="file" id="exampleInputFile">
			  </div>

			  -->
			</form> 
		</div>
		<div class="container">

		<input type="file" id="files" name="file" /> Read bytes: 
			<span class="readBytesButtons">
			  <button class="btn btn-sm btn-primary" >entire file</button>
			</span>
			<div id="byte_range"></div>

		<button type="submit" class="btn btn-default btn-primary" onclick="toTele(exampleInputFile)">Submit</button>

		</div>
		

<script>
  function readBlob(opt_startByte, opt_stopByte) {

    var files = document.getElementById('files').files;
    if (!files.length) {
      alert('Please select a file!');
      return;
    }

    var file = files[0];
    var start = parseInt(opt_startByte) || 0;
    var stop = parseInt(opt_stopByte) || file.size - 1;

    var reader = new FileReader();

    // If we use onloadend, we need to check the readyState.
    reader.onloadend = function(evt) {
      if (evt.target.readyState == FileReader.DONE) { // DONE == 2
        document.getElementById('byte_content').textContent = evt.target.result;
        document.getElementById('byte_range').textContent = 
            ['Read bytes: ', start + 1, ' - ', stop + 1,
             ' of ', file.size, ' byte file'].join('');
      }
    };

    var blob = file.slice(start, stop + 1);
    reader.readAsBinaryString(blob);
  }
  
  document.querySelector('.readBytesButtons').addEventListener('click', function(evt) {
    if (evt.target.tagName.toLowerCase() == 'button') {
      var startByte = evt.target.getAttribute('data-startbyte');
      var endByte = evt.target.getAttribute('data-endbyte');
      readBlob(startByte, endByte);
    }
  }, false);
</script>
	</body>
</html>